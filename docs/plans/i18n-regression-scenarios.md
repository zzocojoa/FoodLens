# I18N-P1-T012 다국어 회귀 시나리오 (EN/KO)

작성일: 2026-02-14  
taskID: `I18N-P1-T012`

## 목적
- 핵심 사용자 플로우에서 EN/KO 전환 시 문자열 혼재, 키 누락, 하드코딩 문자열 회귀를 조기에 차단한다.

## 자동 검증
- 실행 명령:
  - `npm run i18n:check`
  - `npm run i18n:hardcoded-check`
  - `npm run i18n:verify`
- 검증 범위:
  - 리소스 키 정합성(`en.json` vs 다른 locale)
  - 핵심 플로우 화면/컴포넌트 내 직접 UI 문자열 하드코딩 탐지

## 수동 회귀 시나리오

### 시나리오 0: Traveler Card 언어 결정 규칙
- taskID: `I18N-P1-T012-S00`
- 사전 조건: 결과 화면에서 Traveler Allergy Card 확인 가능
- 절차:
  1. 프로필 시트의 `Traveler Card Language`를 `Auto (Photo/GPS)`로 설정
  2. 서로 다른 국가 코드의 결과 2건을 열어 카드 언어 확인
  3. `Korean/English` 등 수동 언어를 선택 후 동일 결과 재확인
- 기대 결과:
  - `auto`에서는 위치 국가 기반 언어 표시
  - 수동 선택 시 위치와 무관하게 선택 언어로 표시

### 시나리오 1: 언어 전환 즉시 반영
- taskID: `I18N-P1-T012-S01`
- 사전 조건: 프로필 화면 진입 가능
- 절차:
  1. 프로필에서 언어를 `English (en-US)`로 변경
  2. 홈/스캔/결과/히스토리 진입
  3. 프로필에서 언어를 `Korean (ko-KR)`로 변경
  4. 동일 경로 재진입
- 기대 결과:
  - 화면 타이틀, 버튼, 경고 문구가 선택 언어로 즉시 일관 표시
  - 이전 언어 문자열이 잔존하지 않음

### 시나리오 2: 스캔/결과 플로우 언어 일관성
- taskID: `I18N-P1-T012-S02`
- 사전 조건: 카메라 권한 허용
- 절차:
  1. 스캔 화면에서 라벨/음식/바코드 각각 1회 실행
  2. `/result` 이동 후 요약/알러지/성분/버튼 확인
- 기대 결과:
  - 스캔 가이드, 권한 안내, 결과 CTA 문구 언어 일관
  - 로딩/오류 메시지에서 언어 혼재 없음

### 시나리오 3: 히스토리 재진입 언어 유지
- taskID: `I18N-P1-T012-S03`
- 사전 조건: 분석 기록 3개 이상
- 절차:
  1. 홈 최근기록에서 항목 선택하여 결과 진입
  2. 히스토리 리스트에서 동일 항목 재진입
  3. 앱 재시작 후 히스토리 재진입
- 기대 결과:
  - 결과 화면 문구가 현재 사용자 언어 기준으로 유지
  - 날짜/시간 표기가 locale에 맞게 표시

### 시나리오 4: 서버 응답 fallback 노출
- taskID: `I18N-P1-T012-S04`
- 사전 조건: 서버 응답이 번역카드/요약 일부 누락 가능한 상태
- 절차:
  1. 언어를 `ko-KR`로 설정 후 분석 1회
  2. 언어를 `en-US`로 설정 후 분석 1회
  3. 요약/경고 영역 확인
- 기대 결과:
  - 요약 텍스트가 공백 없이 fallback 정책대로 노출
  - locale 기반 기본 문구가 깨지지 않음

## 하드코딩 문자열 점검 운영 규칙
- 점검 대상: 핵심 플로우 화면/결과 컴포넌트
- 허용 예외:
  - 브랜드 고유명(`Food Lens`)
- 신규 예외 추가 규칙:
  - 임시 허용 금지
  - 예외 추가 시 코드 리뷰에 사유와 만료 계획 명시

## 릴리즈 게이트 반영 기준
- `npm run i18n:verify` 통과
- EN/KO 수동 시나리오 4개 통과
- 실패 시 배포 보류 후 키 누락/하드코딩/locale 포맷 우선 수정

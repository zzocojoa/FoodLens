# 원본 인물 정체성 유지 방안 (Identity Retention)

## 문제점

현재 사용 중인 방식은 **텍스트-투-이미지 (Text-to-Image)** 입니다.

1.  **입력**: 이미지 -> 텍스트 설명 ("검은 머리의 남자...")
2.  **출력**: 텍스트 설명 -> 완전히 새로운 이미지 생성
    이 과정에서 AI는 텍스트만 보고 "상상해서" 그리기 때문에, 원본 인물의 얼굴 골격이나 세밀한 특징이 사라지고 다른 사람이 됩니다.

## 해결 방안

### 1. 이미지-투-이미지 (Img2Img) 및 높은 노이즈 제거 강도(Denoising Strength) 조절

텍스트뿐만 아니라 **원본 이미지**를 밑그림으로 제공하여 생성하는 방식입니다.

- **개념**: "이 사진의 구도와 얼굴을 유지하되, 스타일만 만화/유화처럼 바꿔줘."
- **장점**: 구현하기 가장 쉽습니다 (API가 지원한다면).
- **단점**: 스타일 변화를 강하게 주면 얼굴도 같이 변할 수 있습니다.

### 2. 페이스 스왑 (Face Swap / 후처리)

일단 스타일이 적용된 이미지를 생성한 뒤, 나중에 원본 얼굴을 오려 붙이는(합성) 방식입니다.

- **도구**: `InsightFace`, `ReActor` 등.
- **과정**:
  1.  스타일 화보 생성 (얼굴이 달라도 일단 생성).
  2.  원본 사진에서 얼굴 추출.
  3.  생성된 화보에 원본 얼굴 합성.
- **장점**: 얼굴이 "진짜 그 사람"임을 보장합니다.
- **단점**: 조명이나 화풍이 다르면 합성 티가 날 수 있습니다. 별도 설치가 필요합니다.

### 3. 개인화 학습 (LoRA / DreamBooth)

AI에게 특정 인물의 얼굴을 미리 공부시키는 방식입니다.

- **개념**: AI에게 "이 사람이 철수야"라고 사진 5~10장을 보여주며 학습시킴.
- **장점**: 가장 자연스럽고 퀄리티가 높습니다.
- **단점**: 비용이 비싸고, 학습 시간이 걸립니다. (사용자마다 학습 필요)

## 이 프로젝트를 위한 추천 (Google Cloud 활용 시)

Google Vertex AI를 쓰신다면 **"이미지 편집(Editing)"** 기능이 가장 적합합니다.
하지만 현재 환경(일반 API Key)에서는 **페이스 스왑(Face Swap)** 라이브러리를 추가로 사용하는 것이 가장 현실적인 대안입니다.

### 추천 워크플로우 (페이스 스왑)

1.  **분석**: 텍스트 프롬프트 생성.
2.  **생성**: 스타일이 적용된 이미지 생성 (이때는 얼굴이 좀 달라도 OK).
3.  **합성**: `insightface` 등을 이용해 생성된 이미지에 원본 얼굴을 다시 입힘.
